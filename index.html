<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Math Assistant - Complete Knowledge Base</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
    body { background: #fff6fe; display: flex; justify-content: center; align-items: flex-start; min-height: 100vh; padding: 20px; gap: 20px; flex-wrap: wrap; }
    
    /* Calculator UI */
    .calculator { background: #fff; width: 320px; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); overflow: hidden; }
    .display-area { padding: 20px; background: #fafafa; text-align: right; border-bottom: 1px solid #eee; }
    #history-display { font-size: 14px; color: #888; height: 20px; margin-bottom: 5px; }
    #main-display { font-size: 40px; font-weight: 600; width: 100%; border: none; text-align: right; background: transparent; outline: none; }
    
    .buttons { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1px; background: #eee; }
    button { height: 60px; border: none; background: #fff; font-size: 18px; cursor: pointer; transition: 0.2s; }
    button:hover { background: #fdf2fb; }
    .operator { background: #dc6bba; color: white; font-size: 22px; }
    .equal { background: #a34582; color: white; font-weight: bold; }
    
    /* Side Panel */
    .side-panel { width: 420px; background: #fff; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); display: flex; flex-direction: column; height: 650px; }
    .tabs { display: flex; background: #f5f5f5; border-bottom: 2px solid #dc6bba; }
    .tab { flex: 1; padding: 15px; text-align: center; cursor: pointer; font-weight: 600; color: #666; }
    .tab.active { background: #fff; color: #dc6bba; }
    
    .content { flex: 1; padding: 20px; overflow-y: auto; display: none; }
    .content.active { display: flex; flex-direction: column; }
    
    /* AI Chat */
    .chat-container { flex: 1; overflow-y: auto; background: #fafafa; padding: 10px; border-radius: 8px; display: flex; flex-direction: column; gap: 10px; }
    .chat-msg { padding: 12px; border-radius: 12px; font-size: 14px; max-width: 90%; line-height: 1.5; }
    .ai { background: #fcdcf9; color: #333; align-self: flex-start; }
    .user { background: #dc6bba; color: white; align-self: flex-end; }
    
    .input-row { display: flex; gap: 10px; margin-top: 15px; }
    input[type="text"] { flex: 1; padding: 12px; border: 2px solid #dc6bba; border-radius: 8px; outline: none; }
    .send-btn { background: #dc6bba; color: white; border: none; padding: 0 20px; border-radius: 8px; cursor: pointer; font-weight: bold; }
    
    strong { color: #a34582; }
    code { background: #eee; padding: 2px 4px; border-radius: 4px; font-family: monospace; }
  </style>
</head>
<body>

  <div class="calculator">
    <div class="display-area">
      <div id="history-display"></div>
      <input type="text" id="main-display" value="0" readonly>
    </div>
    <div class="buttons">
      <button onclick="clearDisplay()">C</button>
      <button onclick="deleteLast()">âŒ«</button>
      <button onclick="appendOp('/')" class="operator">Ã·</button>
      <button onclick="appendOp('*')" class="operator">Ã—</button>
      <button onclick="appendNum('7')">7</button><button onclick="appendNum('8')">8</button><button onclick="appendNum('9')">9</button><button onclick="appendOp('-')" class="operator">âˆ’</button>
      <button onclick="appendNum('4')">4</button><button onclick="appendNum('5')">5</button><button onclick="appendNum('6')">6</button><button onclick="appendOp('+')" class="operator">+</button>
      <button onclick="appendNum('1')">1</button><button onclick="appendNum('2')">2</button><button onclick="appendNum('3')">3</button><button onclick="calculate()" class="equal" style="grid-row: span 2">=</button>
      <button onclick="appendNum('0')" style="grid-column: span 2">0</button><button onclick="appendNum('.')">.</button>
    </div>
  </div>

  <div class="side-panel">
    <div class="tabs">
      <div class="tab active" onclick="switchTab('ai-tab')">ðŸ’¬ Math AI</div>
      <div class="tab" onclick="switchTab('history-tab')">ðŸ“‹ History</div>
    </div>
    <div id="ai-tab" class="content active">
      <div class="chat-container" id="chat-box">
        <div class="chat-msg ai"><strong>Welcome!</strong> I have a complete library of math knowledge built-in. Ask me about:
          <br>â€¢ Prime Numbers
          <br>â€¢ Fractions/Decimals
          <br>â€¢ Geometry (Area/Volume)
          <br>â€¢ Algebra (PEMDAS/Theorems)
        </div>
      </div>
      <div class="input-row">
        <input type="text" id="ai-input" placeholder="Explain prime numbers...">
        <button class="send-btn" onclick="handleAI()">Ask</button>
      </div>
    </div>
    <div id="history-tab" class="content">
      <div id="history-list">No calculations yet.</div>
    </div>
  </div>

  <script>
    const mainDisplay = document.getElementById('main-display');
    const histDisplay = document.getElementById('history-display');
    let historyEntries = [];

    // --- CALCULATOR ENGINE ---
    function appendNum(n) { mainDisplay.value === '0' ? mainDisplay.value = n : mainDisplay.value += n; }
    function appendOp(op) {
      const last = mainDisplay.value.slice(-1);
      if (['+','-','*','/'].includes(last)) mainDisplay.value = mainDisplay.value.slice(0, -1) + op;
      else mainDisplay.value += op;
    }
    function clearDisplay() { mainDisplay.value = '0'; histDisplay.innerText = ''; }
    function deleteLast() { mainDisplay.value = mainDisplay.value.slice(0, -1) || '0'; }
    function calculate() {
      try {
        const res = eval(mainDisplay.value);
        const entry = `${mainDisplay.value} = ${res}`;
        historyEntries.push(entry);
        histDisplay.innerText = mainDisplay.value + ' =';
        mainDisplay.value = res;
        updateHistoryUI();
      } catch { mainDisplay.value = "Error"; }
    }
    function updateHistoryUI() {
      document.getElementById('history-list').innerHTML = historyEntries.map(item => `<div style="padding:12px; border-bottom:1px solid #eee; background:#fff;">${item}</div>`).reverse().join('');
    }

    // --- THE MATHEMATICAL KNOWLEDGE ENGINE ---
    function switchTab(id) {
      document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      event.currentTarget.classList.add('active');
    }

    function addMessage(text, sender) {
      const msg = document.createElement('div');
      msg.className = `chat-msg ${sender}`;
      msg.innerHTML = text;
      document.getElementById('chat-box').appendChild(msg);
      document.getElementById('chat-box').scrollTop = document.getElementById('chat-box').scrollHeight;
    }

    function handleAI() {
      const input = document.getElementById('ai-input');
      const query = input.value.trim().toLowerCase();
      if (!query) return;

      addMessage(input.value, 'user');
      input.value = '';

      setTimeout(() => {
        let response = "";

        // Knowledge Matching
        if (query.includes("prime")) {
          response = "<strong>Prime Numbers:</strong> Numbers greater than 1 that only have two factors: 1 and themselves. 2 is the only even prime! <br><em>Examples: 2, 3, 5, 7, 11, 13, 17...</em>";
        } else if (query.includes("pi")) {
          response = "<strong>Pi (Ï€):</strong> The ratio of a circle's circumference to its diameter. It is an irrational number approximately equal to <strong>3.14159</strong>.";
        } else if (query.includes("pythagorean")) {
          response = "<strong>Pythagorean Theorem:</strong> In a right triangle, <code>aÂ² + bÂ² = cÂ²</code>. Where 'c' is the longest side (hypotenuse).";
        } else if (query.includes("pemdas") || query.includes("order of operations")) {
          response = "<strong>PEMDAS:</strong> The order to solve math: <br>1. Parentheses <br>2. Exponents <br>3. Mult/Div (left to right) <br>4. Add/Sub (left to right).";
        } else if (query.includes("fraction")) {
          response = "<strong>Fractions:</strong> Parts of a whole. The top (numerator) is how many parts you have; the bottom (denominator) is the total parts.";
        } else if (query.includes("area")) {
          response = "<strong>Area Formulas:</strong> <br>â€¢ Rectangle: <code>Length Ã— Width</code> <br>â€¢ Triangle: <code>Â½ Ã— Base Ã— Height</code> <br>â€¢ Circle: <code>Ï€ Ã— rÂ²</code>";
        } else if (query.includes("decimal")) {
          response = "<strong>Decimals:</strong> A way to write fractions or mixed numbers using a dot. Each place to the right of the dot represents tenths, hundredths, etc.";
        } else if (query.includes("square root")) {
          response = "<strong>Square Root (âˆš):</strong> A number that, when multiplied by itself, gives the original number. Example: <code>âˆš25 = 5</code>.";
        } else if (query.includes("hi") || query.includes("hello")) {
          response = "Hello! I am your Math AI. I can explain formulas, definitions, and rules. Ask me about <strong>Area</strong>, <strong>Primes</strong>, or <strong>PEMDAS</strong>!";
        } else {
          response = "I'm still learning that specific topic, but I can explain <strong>Primes, Pi, Area, Fractions, PEMDAS, and Square Roots</strong> right now!";
        }

        addMessage(response, "ai");
      }, 400);
    }
  </script>
</body>
</html>
